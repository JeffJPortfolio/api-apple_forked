<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="admin">



    <!-- Select stores for List -->
	<select id="storeSelectList" parameterType="String" resultType="com.javaex.vo.jStoreVo">
	    <![CDATA[
	        select  storeNum, 
	                storeName,
	                storeAddress,
	                storeNumber,
	                storeImage
	        from Store  
	    ]]>
	</select>
	
    <!-- Select stores for List -->
	<select id="userSelectList" parameterType="String" resultType="com.javaex.vo.unionVo">
	    <![CDATA[
	        select  userNum, 
	                userId,
	                password,
	                name,
	                phoneNumber,
	                address
	        from user  
	    ]]>
	</select>
	
	<select id="deliverySelectList" parameterType="String" resultType="com.javaex.vo.unionVo">
	    <![CDATA[
	        SELECT 
			    Receipt.reciptNum,
			    History.historyNum,
			    History.productDetailNum,
			    History.productCount,
			    ProductDetail.seriesNum,
			    ProductDetail.prudctNum,
			    Color.colorName,
			    Display.displaySize,
			    Storage.storageSize,
			    ProductDetail.productPrice,
			    Store.storeName,
			    Store.storeNumber,
			    Receipt.userNum,
			    `User`.name,
			    Receipt.userNum,
			    Receipt.purchasedDate,
			    Receipt.shippingAddress,
			    Receipt.shippingStatus,
			    Receipt.totalPrice
			FROM 
			    Receipt
			JOIN 
			    History ON Receipt.reciptNum = History.reciptNum
			JOIN 
			    ProductDetail ON History.productDetailNum = ProductDetail.productDetailNum
			JOIN 
			    Color ON ProductDetail.colorNum = Color.colorNum 
			    AND ProductDetail.seriesNum = Color.seriesNum
			JOIN 
			    Display ON ProductDetail.displayNum = Display.displayNum 
			    AND ProductDetail.seriesNum = Display.seriesNum
			JOIN 
			    Storage ON ProductDetail.storageNum = Storage.storageNum 
			    AND ProductDetail.seriesNum = Storage.seriesNum
			JOIN 
			    Store ON Receipt.storeNum = Store.storeNum
			JOIN 
			    `User` ON Receipt.userNum = `User`.userNum
			WHERE Receipt.shippingStatus = '배송완료';
 
	    ]]>
	</select>
	
	<select id="historySelectList" parameterType="String" resultType="com.javaex.vo.unionVo">
		 <![CDATA[
	        SELECT 
			    Receipt.reciptNum,
			    History.historyNum,
			    History.productDetailNum,
			    History.productCount,
			    ProductDetail.seriesNum,
			    ProductDetail.prudctNum,
			    Color.colorName,
			    Display.displaySize,
			    Storage.storageSize,
			    ProductDetail.productPrice,
			    Store.storeName,
			    Store.storeNumber,
			    Receipt.userNum,
			    `User`.name,
			    Receipt.userNum,
			    Receipt.purchasedDate,
			    Receipt.shippingAddress,
			    Receipt.shippingStatus,
			    Receipt.totalPrice
			FROM 
			    Receipt
			JOIN 
			    History ON Receipt.reciptNum = History.reciptNum
			JOIN 
			    ProductDetail ON History.productDetailNum = ProductDetail.productDetailNum
			JOIN 
			    Color ON ProductDetail.colorNum = Color.colorNum 
			    AND ProductDetail.seriesNum = Color.seriesNum
			JOIN 
			    Display ON ProductDetail.displayNum = Display.displayNum 
			    AND ProductDetail.seriesNum = Display.seriesNum
			JOIN 
			    Storage ON ProductDetail.storageNum = Storage.storageNum 
			    AND ProductDetail.seriesNum = Storage.seriesNum
			JOIN 
			    Store ON Receipt.storeNum = Store.storeNum
			JOIN 
			    `User` ON Receipt.userNum = `User`.userNum
			WHERE Receipt.shippingStatus != '배송완료';
 
	    ]]>
	</select>
	
</mapper>